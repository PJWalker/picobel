/**
 *  ____  _           _          _    _
 * |  _ \(_) ___ ___ | |__   ___| |  (_)___ 
 * | |_) | |/ __/ _ \| '_ \ / _ \ |  | / __|
 * |  __/| | (_| (_) | |_) |  __/ |_ | \__ \
 * |_|   |_|\___\___/|_.__/ \___|_(_)| |___/
 * Picobel.js                       _/ |    
 * tomhazledine.com/audio          |__/      
 */
function Picobel(){function e(){var e=document.getElementsByTagName("audio"),a=[].slice.call(e);return a}function a(e){output=[];for(var a=0;a<e.length;a++)item={},item.url=e[a].src,output.push(item);return output}function t(e){for(var a=0;a<e.length;a++){var t=document.createElement("div");t.className="customAudioPlayer loading player_"+a;var n=L[a].className;""!=n&&y(t,n),t.setAttribute("data-song-index",a);var s=document.createElement("div");s.className="loader",t.appendChild(s);var r=document.createElement("button");r.className="playerTrigger";var l=document.createElement("span");l.className="buttonText",l.innerHTML="play",r.appendChild(l);var i=document.createElement("div");i.className="metaWrapper";var o=document.createElement("span");o.className="titleDisplay",o.innerHTML="File "+(a+1),i.appendChild(o);var d=document.createElement("span");d.className="artistDisplay",i.appendChild(d);var u=document.createElement("div");u.className="timingsWrapper";var m=document.createElement("span");m.className="songPlayTimer",m.innerHTML="0:00",u.appendChild(m);var c=document.createElement("div");c.className="songProgressSliderWrapper";var p=document.createElement("div");p.className="pseudoProgressBackground",c.appendChild(p);var g=document.createElement("div");g.className="pseudoProgressIndicator",c.appendChild(g);var v=document.createElement("div");v.className="pseudoProgressPlayhead",c.appendChild(v);var h=document.createElement("input");h.type="range",h.min=0,h.max=100,h.value=0,h.className="songProgressSlider",c.appendChild(h),u.appendChild(c);var N=document.createElement("span");N.className="songDuration",N.innerHTML="-:--",u.appendChild(N);var E=document.createElement("div");E.className="songVolume";var C=document.createElement("div");C.className="songVolumeLabelWrapper";var f=document.createElement("span");f.className="songVolumeLabel",f.innerHTML="Volume",C.appendChild(f);var P=document.createElement("span");P.className="songVolumeValue",P.innerHTML="10",C.appendChild(P),E.appendChild(C);var T=document.createElement("div");T.className="songVolumeSliderWrapper";var x=document.createElement("div");x.className="pseudoVolumeBackground",T.appendChild(x);var b=document.createElement("div");b.className="pseudoVolumeIndicator",T.appendChild(b);var B=document.createElement("div");B.className="pseudoVolumePlayhead",T.appendChild(B);var M=document.createElement("input");M.type="range",M.min=0,M.max=1,M.value=1,M.step=.1,M.className="songVolumeSlider",T.appendChild(M),E.appendChild(T),t.appendChild(r),t.appendChild(i),t.appendChild(u),t.appendChild(E),e[a].parentNode.replaceChild(t,e[a])}}function n(e){for(var a=[],t=0;t<e.length;t++)a[t]=new Audio(e[t].url),a[t].currentTime=0,x[t].addEventListener("click",c,!1),A[t].addEventListener("input",u,!1),D[t].addEventListener("input",m,!1),a[t].addEventListener("timeupdate",p,!1),a[t].addEventListener("loadstart",s,!1),a[t].addEventListener("canplaythrough",r,!1),a[t].setAttribute("data-song-index",t);return a}function s(){console.log("Load start")}function r(){var e=this.getAttribute("data-song-index");console.log("Can play through "+e),v(e),E(T[e],"loading"),l(e)}function l(e){var a=k[e].src,t=C(a),n=f(a),s=L[e].title;""!=s?V[e].innerHTML=s:V[e].innerHTML=n+"."+t;var r=L[e].getAttribute("data-artist");""!=r&&(H[e].innerHTML=r)}function o(){for(var e=0;e<P.length;e++)k[e].pause()}function d(e){R=e;for(var a=0;a<P.length;a++)a!=e&&k[a].pause();k[e].play()}function u(){var e=this.value,a=this.parentNode.parentNode.parentNode.getAttribute("data-song-index"),t=k[a].duration,n=t*(e/100);n=n.toFixed(2),k[a].currentTime=n,g(a)}function m(){var e=this.value,a=10*e,t=100*e,n=this.parentNode.parentNode.parentNode.getAttribute("data-song-index");k[n].volume=e,w[n].innerHTML=a,D[n].value=e,I[n].style.width=t+"%",W[n].style.left=t+"%"}function c(){var e=this.parentNode.getAttribute("data-song-index"),a=b[e];if(N(this,"songPlaying"))o(),E(this,"songPlaying"),y(this,"songPaused"),a.innerHTML="play";else{for(i=0;i<x.length;i++)E(x[i],"songPlaying"),y(x[i],"songPaused"),b[i].innerHTML="play";d(e),y(this,"songPlaying"),E(this,"songPaused"),a.innerHTML="pause"}}function p(){var e=this.getAttribute("data-song-index");g(e)}function g(e){var a=k[e].currentTime,t=k[e].duration;progressParsed=h(a),B[e].innerHTML=progressParsed,a>=t&&E(x[e],"songPlaying");var n=(a/t*100).toFixed(2);A[e].value=n,F[e].style.width=n+"%",S[e].style.left=n+"%"}function v(e){var a=k[e].duration,t=h(a);M[e].innerHTML=t}function h(e){var a=Math.floor(e%3600/60);a=a.toFixed(0),a=a.toString();var t=Math.floor(e%3600%60);t=t.toFixed(0),t=t.toString(),10>t&&(t="0"+t);var n=a+":"+t;return n}function N(e,a){if(e.classList)var t=e.classList.contains(a);else var t=new RegExp("(^| )"+a+"( |$)","gi").test(e.className);return t}function y(e,a){e.classList?e.classList.add(a):e.className+=" "+a}function E(e,a){e.classList?e.classList.remove(a):e.className=e.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")}function C(e){return e.substr((~-e.lastIndexOf(".")>>>0)+2)}function f(e){var a=e.replace(/^.*[\\\/]/,""),t=a.split(".")[0];return t}var L=e(),P=a(L);t(L);var T=document.getElementsByClassName("customAudioPlayer"),x=document.getElementsByClassName("playerTrigger"),b=document.getElementsByClassName("buttonText"),B=document.getElementsByClassName("songPlayTimer"),M=document.getElementsByClassName("songDuration"),V=document.getElementsByClassName("titleDisplay"),H=document.getElementsByClassName("artistDisplay"),A=document.getElementsByClassName("songProgressSlider"),S=document.getElementsByClassName("pseudoProgressPlayhead"),F=document.getElementsByClassName("pseudoProgressIndicator"),D=document.getElementsByClassName("songVolumeSlider"),w=document.getElementsByClassName("songVolumeValue"),I=document.getElementsByClassName("pseudoVolumeIndicator"),W=document.getElementsByClassName("pseudoVolumePlayhead"),k=n(P),R=0;return{sliderScrub:u,playSong:d,pauseAll:o}}